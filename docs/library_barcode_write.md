# **独自バーコード発行・管理技術スタック選択肢（ISBN なし書籍向け、2025 年 4 月）**

ISBN が付与されていない書籍（自費出版、古書、特殊資料など）に、管理目的で独自の識別子を付与し、バーコードとして発行・利用する場合の技術選択肢を以下に示します。

## **1\. バーコード形式の選択**

まず、発行するバーコードの「形式」を選択する必要があります。書籍のユニーク ID や関連情報を管理するという目的の場合、主に以下の 2 つの形式が候補となります。それぞれの特徴を比較し、用途に合った形式を選びます。

| 形式          | 主な特徴                                                                                                                                                    | メリット                                                                                                                                                                                                                                                                      | デメリット                                                                                                                                                                                                    | 適した用途例                                                                                                                                                                                                         | 推奨度 |
| :------------ | :---------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----- |
| **Code 128**  | • 1 次元バーコード • 可変長の英数字・記号を効率的に表現 • 高密度で比較的小さく印刷可能                                                                      | • **短い ID（数十文字程度）の格納に最適かつ効率的** • 印刷サイズを比較的小さくできる • 多くの汎用スキャナ/ライブラリで高速に読み取り可能 • \*\*DB 連携による情報管理モデルと非常に親和性が高い\*\*                                                                            | • 格納できる情報量に限界がある（長文テキスト、日本語、バイナリデータは不向き） • 2 次元コードほどの耐汚損性は持たない                                                                                         | • **ユニーク ID 管理**（例: `BOOK-00001`） • 資産管理番号 • シリアル番号 • （DB 参照を前提とした）短い識別子の格納                                                                                                   | ★★★★★  |
| **QR コード** | • 2 次元バーコード • 大容量データ格納可能（数字、英数字、漢字・かな、バイナリ） • エラー訂正機能により汚れや破損に強い • 360 度どの向きからでも読み取り可能 | • **数百〜数千文字の情報を格納可能** • \*\*日本語（漢字・かな）\*\*も効率的に格納できる • \*\*汚れや破損に対する耐性\*\*が高い（エラー訂正レベルによる） • \*\*スマートフォンでの読み取りが非常に容易\*\* • DB レスでの情報保持や、\*\*URL リンクによる外部情報連携\*\*が可能 | • 単純な ID 管理のみの場合、オーバースペックになる可能性がある • Code 128 よりは若干大きな印刷面積が必要になる傾向（格納情報量による） • 読み取りに僅かに多くの計算リソースを要する場合がある（通常問題なし） | • DB を使わない/使えない状況での情報保持 • 書籍タイトル、著者、メモ等の\*\*複数情報を直接格納\*\* • \*\*書籍詳細ページへの URL リンク\*\* • 連絡先情報 • スマホアプリでの利用が前提の場合 • 日本語情報を含めたい場合 | ★★★★☆  |

**推奨**: どちらの形式を選択するかは、**バーコードに何を格納したいか**、そして**どのように運用したいか**によって決まります。

- **データベース（DB）に書籍情報をしっかり保存し、バーコードにはその DB を参照するための短い ID だけを格納する** 運用であれば、**Code 128** が最もシンプルで効率的です。
- **DB を使わずにバーコード自体に書籍タイトルやメモなどの情報を持たせたい**場合や、**書籍情報が載っている Web ページへの URL を格納したい**場合、あるいは**スマートフォンでの読み取りやすさや日本語対応、耐汚損性を重視する**場合は、**QR コード** が適しています。
- **判断に迷う場合**: 単純な ID 管理であっても、将来的な拡張性（URL 連携など）やスマートフォンのカメラでの読み取りやすさを考慮して、QR コードを選択するのも有効な戦略です。

## **2\. バーコード生成ライブラリ (JavaScript)**

選択した形式のバーコードを生成するためのライブラリを選定します。ブラウザや Node.js 環境で利用しやすい JavaScript ライブラリを中心に比較します。

### **主要候補比較**

| ライブラリ                                                                                    | 開発状況         | 主な特徴                                                                                                        | 対応コード形式 (代表例)                                                                                        | 出力形式                   | ライセンス | 推奨度 |
| :-------------------------------------------------------------------------------------------- | :--------------- | :-------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------- | :------------------------- | :--------- | :----- |
| **JsBarcode** [\[1\]](https://github.com/lindell/JsBarcode)                                   | アクティブ開発中 | • シンプルで使いやすい API (JS) • 1D バーコードに特化 • ブラウザ/Node.js 対応 • 豊富なオプション                | **Code 128**, Code 39, EAN, UPC, ITF, MSI など                                                                 | SVG, Canvas, IMG           | MIT        | ★★★★★  |
| **bwip-js** [\[2\]](https://github.com/metafloor/bwip-js)                                     | アクティブ開発中 | • 非常に多くのバーコード形式に対応 (JS) • 高度なカスタマイズ性 • Node.js でのサーバーサイド生成に強み           | **Code 128**, **QR コード**, Data Matrix, PDF417 など多数                                                      | PNG (Buffer), SVG (文字列) | MIT        | ★★★★☆  |
| **qrcode** [\[3\]](https://github.com/soldair/node-qrcode)                                    | アクティブ開発中 | • QR コード生成に特化 (JS) • 使いやすい API • ブラウザ/Node.js 対応 • エラー訂正レベル設定可能                  | **QR コード**                                                                                                  | Canvas, SVG, UTF8          | MIT        | ★★★★☆  |
| **picqer/php-barcode-generator** [\[4\]](https://github.com/picqer/php-barcode-generator) (※) | アクティブ開発中 | • **PHP 環境での標準的選択肢** • フレームワーク非依存 • 使いやすい API • サーバーサイドで生成ロジックを一元管理 | **Code 128, Code 39, EAN, UPC, ITF, CODABAR, 他多数** [\[4\]](https://github.com/picqer/php-barcode-generator) | PNG, SVG, HTML             | LGPL-3.0   | ★★★★★  |

(※) picqer/php-barcode-generator

- PHP 環境での利用
- PHP でバックエンドを利用する場合、JsBarcode よりこちらを推奨 (※現プロジェクトのバックエンド API で使用中)

### MIT ライセンスと LGPL-3.0 ライセンスの違いについて

どちらもオープンソースライセンスですが、ソフトウェアを利用・改変・再配布する際の**条件**が異なります。

**MIT ライセンス (Permissive License - 寛容なライセンス)**

- **非常にシンプルで自由度が高い**のが特徴です。
- **主な義務**:
  - 元の著作権表示とライセンス条文を含めること。
- **許可されること**:
  - **商用利用**: 作成したソフトウェアを販売できます。
  - **改変**: 自由にコードを改変できます。
  - **再配布**: 改変版を含め、自由に再配布できます。
  - **サブライセンス**: 別のライセンス（プロプライエタリ含む）で配布することも可能です（ただし、元の MIT ライセンスの表示は必要）。
- **制約**: ほぼありません。作者は無保証（AS IS）を宣言します。

**LGPL-3.0 (Lesser General Public License - 劣等一般公衆利用許諾契約)**

- GPL (General Public License) よりも**制約が緩やか**なライセンスです。「コピーレフト型」に分類されますが、制限はライブラリ自体に限定されることが多いです。
- **主な義務**:
  - 元の著作権表示とライセンス条文を含めること。
  - **LGPL ライブラリ自体を改変した場合**: 改変部分のソースコードも LGPL として公開する必要があります。
  - **LGPL ライブラリとリンクする場合**:
    - **動的リンク**の場合: 自分のソフトウェアのライセンスは自由に選べます（プロプライエタリも可）。
    - **静的リンク**の場合: ユーザーが LGPL ライブラリ部分を**差し替えられるように**、自分のソフトウェアのオブジェクトコード（またはソースコード）を提供する必要があります [\\[2\\]](https://users.rust-lang.org/t/confused-about-licenses-of-crates-eg-mit-vs-lgpl/97934)。完全にプロプライエタリにするのが難しくなる場合があります。
- **許可されること**:
  - **商用利用**: 可能です（条件付き）。
  - **改変**: 可能です（条件付きでソース公開）。
  - **再配布**: 可能です（条件付き）。
- **制約**: ライブラリ自体の改変や、静的リンク時の再リンク可能性の担保など、MIT より多くの義務があります。

**まとめ**

| 特徴                               | MIT ライセンス             | LGPL-3.0 ライセンス                                        |
| :--------------------------------- | :------------------------- | :--------------------------------------------------------- |
| **自由度**                         | 高い                       | MIT より低い                                               |
| **主な義務**                       | 著作権・ライセンス表示     | 表示 + 改変時ソース公開, 再リンク可能性担保 (静的リンク時) |
| **派生物のライセンス**             | 自由（プロプライエタリ可） | ライブラリ改変部は LGPL, 利用側は比較的自由 (動的リンク時) |
| **商用利用**                       | 容易                       | 可能（条件あり）                                           |
| **コピーレフト**                   | なし                       | 弱いコピーレフト (ライブラリ自体に適用)                    |
| **`picqer/php-barcode-generator`** | (適用外)                   | **適用** (ライブラリとして利用する分には制約緩やか)        |

簡単に言えば、MIT は「ほぼ自由に使っていいよ、ただし作者名は残してね」というスタンス、LGPL は「ライブラリ自体はオープンにし続けてね、でもそれを使うあなたのアプリまでオープンにする必要はないよ（条件によるけど）」というスタンスです [\[3\\]](https://opensource.stackexchange.com/questions/4606/implication-of-lgpl-and-mit-licenses-for-commercial-use-of-jsxgraph-library)。

### **詳細分析と推奨**

**JsBarcode** は、Code 128 などの 1D バーコードをブラウザ上で手軽に生成したい場合に最も推奨されるライブラリです。導入が容易で、ドキュメントも分かりやすく、多くのプロジェクトで採用実績があります。

**bwip-js** は、対応形式の多さとカスタマイズ性が魅力です。サーバーサイドで画像を生成したい場合や、JsBarcode が対応していない形式が必要な場合に有力な選択肢となります。QR コード生成も可能です。

**qrcode** は、QR コードを生成する場合のデファクトスタンダードと言えるライブラリです。シンプルで信頼性が高く、QR コード生成に特化した機能（エラー訂正レベルなど）も充実しています。

**picqer/php-barcode-generator** は、PHP 環境での標準的選択肢です。サーバーサイドで生成ロジックを一元管理できます。

**推奨**:

- **Code 128** を発行する場合: **JsBarcode** を第一選択として推奨します。
- **QR コード** を発行する場合: **qrcode** を推奨します。（bwip-js でも生成可能です）
- より多くの形式や高度な要件がある場合: **bwip-js** を検討します。
- PHP 環境での利用: **picqer/php-barcode-generator** を推奨します。

**補足**: これらのライブラリはサーバーサイド（Node.js）でも利用可能です。大量のバーコードを生成する場合や、他のサーバーサイド処理と連携する場合は、Node.js 環境での利用も有効です。

## **3\. 発行した独自バーコードの読み取りについて**

**はい、発行した独自バーコードも `ZXing-JS + getUserMedia` の組み合わせで読み取ることが可能です。**

- **`getUserMedia`**: この API はデバイスのカメラ映像を取得する役割を担っており、表示されているのが ISBN バーコードか独自バーコードかに関わらず、映像をストリームとして供給します。
- **`ZXing-JS`**: このライブラリは、多様なバーコード**形式**をデコード（解析）する能力を持っています。重要なのは、**バーコードにエンコードされているデータの内容（それが ISBN か独自 ID か）ではなく、バーコードの形式（Code 128, QR コードなど）が `ZXing-JS` のサポート対象であるか**どうかです。

**結論**: 上記で推奨した **Code 128** や **QR コード** は、いずれも `ZXing-JS` が標準でサポートしている形式です。したがって、これらの形式で独自の ID を含むバーコードを発行すれば、以前のレポートで推奨された `ZXing-JS + getUserMedia` の技術スタックを使って問題なく読み取ることができます。特別な対応は不要です。
